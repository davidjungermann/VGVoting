(this["webpackJsonpvg-voting"]=this["webpackJsonpvg-voting"]||[]).push([[0],{21:function(e,t,a){e.exports=a(41)},30:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(13),c=a.n(r),s=(a(26),a(27),a(14)),i=a(15),u=a(20),o=a(18),m=a(17),b=a(1),E=a(19);a(30);function d(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),i=Object(b.a)(s,2),u=i[0],o=i[1],m=Object(n.useState)("V\xe4lj en fil med r\xf6stkoder"),d=Object(b.a)(m,2),f=d[0],g=d[1],h=Object(n.useState)("V\xe4lj en fil med r\xf6ster"),p=Object(b.a)(h,2),v=p[0],j=p[1],N=Object(n.useState)(!1),O=Object(b.a)(N,2),k=O[0],x=O[1];Object(n.useEffect)((function(){0===r.length?o(!1):2===r.length&&o(!0)}),[r]);var y=function(e){e.preventDefault(),x(!1);var t=e.target.id,a=e.target.files[0];a.name.endsWith("xlsx")||a.name.endsWith("xls")?(c([].concat(Object(E.a)(r),[{file_id:t,uploaded_file:a}])),"0"===t?g(null===a||void 0===a?void 0:a.name):j(null===a||void 0===a?void 0:a.name)):x(!0)};return l.a.createElement("div",{className:"container"},l.a.createElement("form",{className:"upload-container",onSubmit:function(t){t.preventDefault(),r.forEach((function(t){"0"===(null===t||void 0===t?void 0:t.file_id)?e.setVoteCodeFile(null===t||void 0===t?void 0:t.uploaded_file):e.setVoteFile(null===t||void 0===t?void 0:t.uploaded_file),e.setSubmitted(!0),c([]),g("V\xe4lj en fil med r\xf6stkoder"),j("V\xe4lj en fil med r\xf6ster")}))}},l.a.createElement("div",{className:"upload-btn"},l.a.createElement("h3",{className:"file-upload-header"},"R\xf6stkoder"),l.a.createElement("input",{id:0,name:"file",type:"file",accept:".xlsx",className:"file-input",onChange:y}),l.a.createElement("label",{htmlFor:0},f)),l.a.createElement("div",{className:"upload-btn"},l.a.createElement("h3",{className:"file-upload-header"},"R\xf6ster"),l.a.createElement("input",{id:1,type:"file",accept:".xlsx",className:"file-input",onChange:y}),l.a.createElement("label",{htmlFor:1},v),k?l.a.createElement("div",{className:"error-message-root"},l.a.createElement("span",{className:"error-message"},"Filen m\xe5ste vara av typen .xlsx eller .xls.")):null),u?l.a.createElement("div",{className:"submit-btn-root"},l.a.createElement("button",{className:"btn btn-success btn-lg",type:"submit"},"Ladda upp")):l.a.createElement("div",{className:"submit-btn-root"},l.a.createElement("button",{className:"btn btn-success btn-lg",type:"submit",disabled:!0},"Ladda upp"))))}var f=a(3),g=a.n(f),h=a(31);function p(e){var t=Object(n.useState)([]),a=Object(b.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)([]),i=Object(b.a)(s,2),u=i[0],o=i[1],m=Object(n.useState)(!1),E=Object(b.a)(m,2),d=E[0],f=E[1],p=Object(n.useState)(!0),v=Object(b.a)(p,2),j=v[0],N=v[1],O=Object(n.useState)(null),k=Object(b.a)(O,2),x=k[0],y=k[1],S=Object(n.useState)(0),C=Object(b.a)(S,2),w=C[0],R=C[1],F=Object(n.useState)(null),W=Object(b.a)(F,2),V=W[0],B=W[1],G=Object(n.useState)(null),_=Object(b.a)(G,2),A=_[0],D=_[1],T=Object(n.useState)(null),J=Object(b.a)(T,2),L=J[0],I=J[1],$=Object(n.useState)(null),q=Object(b.a)($,2),z=q[0],H=q[1];Object(n.useEffect)((function(){M(),K()}),[]);var K=function(){var t=new h.Workbook;e.voteFile.arrayBuffer().then((function(e){t.xlsx.load(e)})),I(t)},M=function(){var t=new h.Workbook;e.voteCodeFile.arrayBuffer().then((function(e){t.xlsx.load(e)})),D(t)},P=function(){var e=[];return L.getWorksheet().getColumn("B").eachCell((function(t){return e.push(t.text)})),e.slice(1)},Q=function(){var e=[];return A.getWorksheet().getColumn("A").eachCell((function(t){return e.push(t.text)})),e},U=function(){for(var e=L.getWorksheet(),t=function(){var e={};return L.getWorksheet().getRow(1).eachCell((function(t){"Tidst\xe4mpel"!==t.text&&"Valkod"!==t.text&&(e[t.text]=[])})),e}(),a=3;a<=e.actualColumnCount;a++)e.getColumn(a).eachCell((function(e){for(var a in t)if(e.text.startsWith(a)){var n=t[a];n.push(e.text),t[a]=n}}));for(var n in t)t[n].shift();return t},X=function(t){e.setSubmitted(!1),t.preventDefault()},Y=function(){var e=function(){var e=U(),t={};for(var a in e)e[a].forEach((function(e){(e=e.split(",")).forEach((function(e){(e=e.trim()).endsWith("*")&&(e=e.replace(/\*/g,"")),t[e]=t[e]+1||1}))}));return t}(),t=[];(function(){var e=[],t=P(),a=Q(),n=[],l=[];return t.forEach((function(t){a.includes(t)?(e.push(t),n.push("Giltig r\xf6st: "+t),a=a.filter((function(e){return e!==t}))):e.includes(t)?(l.push("Ogiltig r\xf6st, har r\xf6stat mer \xe4n 1 g\xe5ng: "+t),y(!1)):(l.push("Ogiltig r\xf6st, ej registrerad: "+t),y(!1))})),0===l.length&&y(!0),[n,l]})().forEach((function(e){return e.forEach((function(e){return t.push(e)}))}));var a=Object.entries(e),n=[];a.forEach((function(e){var t=Object(b.a)(e,2),a=t[0],l=t[1];if(1===l)var r=" r\xf6st";else r=" r\xf6ster";n.push(a+": "+l+r)})),c(t),o(n),f(!0),N(!1),R(Q().length),H(function(){var e=[],t=P(),a=Q();a.length>t.length?(y(!1),B(!1),a.filter((function(e){return!t.includes(e)})).forEach((function(t){e.push("Registrerad, men har ej r\xf6stat: "+t)}))):a.length<t.length?B(!1):B(!0);return e}())};return l.a.createElement("div",{className:"container w-50"},d?x&&V?l.a.createElement("div",{className:"container w-75"},l.a.createElement("h1",null,l.a.createElement("b",null,"Resultat")),l.a.createElement("ul",{className:"list-group"},u.map((function(e){return l.a.createElement("li",{key:g()(),className:"list-group-item"}," ",l.a.createElement("h3",null," ",e))}))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h1",null,l.a.createElement("b",null,"R\xf6stvalidering")),l.a.createElement("br",null),l.a.createElement("h3",null,l.a.createElement("b",null,"Antal r\xf6stande: ",r.length)),l.a.createElement("h3",null,l.a.createElement("b",null,"R\xf6stl\xe4ngd: ",w)),l.a.createElement("br",null),l.a.createElement("ul",{className:"list-group"},r.map((function(e){return l.a.createElement("li",{key:g()(),className:"list-group-item"}," ",l.a.createElement("h3",null," ",e))}))),l.a.createElement("div",{className:"col text-center"},l.a.createElement("button",{type:"button",className:"btn btn-success m-4 btn-lg",onClick:X},"Genomf\xf6r en ny r\xf6stning"))):x&&!V?l.a.createElement("div",{className:"container w-75"},l.a.createElement("h5",null,l.a.createElement("b",null,"R\xf6stningen \xe4r inte giltig. R\xf6stl\xe4ngd och antalet r\xf6ster st\xe4mmer \xf6verensst\xe4mmer inte.")),l.a.createElement("br",null),l.a.createElement("ul",{className:"list-group"},z.map((function(e){return l.a.createElement("li",{key:g()(),className:"list-group-item"}," ",l.a.createElement("h3",null," ",e))}))),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("h5",null,"Antal r\xf6stande: ",r.length),l.a.createElement("h5",null,"R\xf6stl\xe4ngd: ",w)),l.a.createElement("div",{className:"col text-center"},l.a.createElement("button",{type:"button",className:"btn btn-success m-4 btn-lg",onClick:X},"Genomf\xf6r en ny r\xf6stning"))):!x&&V?l.a.createElement("div",{className:"container w-75"},l.a.createElement("h5",null,l.a.createElement("b",null,"R\xf6stningen \xe4r inte giltig. Ta bort ogiltiga r\xf6ster ur Excel-arket och ladda upp igen:"," ")),l.a.createElement("br",null),l.a.createElement("ul",{className:"list-group"},r.map((function(e){return l.a.createElement("li",{key:g()(),className:"list-group-item"}," ",l.a.createElement("h3",null," ",e))}))),l.a.createElement("div",{className:"col text-center"},l.a.createElement("button",{type:"button",className:"btn btn-success m-4 btn-lg",onClick:X},"Genomf\xf6r en ny r\xf6stning"))):x||V?void 0:l.a.createElement("div",{className:"container w-75"},l.a.createElement("h5",null,l.a.createElement("b",null,"R\xf6stningen \xe4r inte giltig. Ta bort ogiltiga r\xf6ster ur Excel-arket och ladda upp igen:"," ")),l.a.createElement("br",null),l.a.createElement("ul",{className:"list-group"},r.map((function(e){return l.a.createElement("li",{key:g()(),className:"list-group-item"}," ",l.a.createElement("h3",null," ",e))}))),l.a.createElement("br",null),l.a.createElement("ul",{className:"list-group"},z.map((function(e){return l.a.createElement("li",{key:g()(),className:"list-group-item"}," ",l.a.createElement("h3",null," ",e))}))),l.a.createElement("br",null),l.a.createElement("h5",null,l.a.createElement("b",null,"R\xf6stningen \xe4r inte giltig. R\xf6stl\xe4ngd och antalet r\xf6ster st\xe4mmer \xf6verensst\xe4mmer inte.")),l.a.createElement("br",null),l.a.createElement("li",{className:"list-group-item"},l.a.createElement("h5",null,"Antal r\xf6stande: ",r.length),l.a.createElement("h5",null,"R\xf6stl\xe4ngd: ",w)),l.a.createElement("div",{className:"col text-center"},l.a.createElement("button",{type:"button",className:"btn btn-success m-4 btn-lg",onClick:X},"Genomf\xf6r en ny r\xf6stning"))):null,l.a.createElement("div",{className:"row"}),j?l.a.createElement("div",{className:"col text-center"},l.a.createElement("button",{type:"button",className:"btn btn-success m-4 btn-lg",onClick:Y},"Visa valresultat")):null)}a(34);function v(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),s=Object(b.a)(c,2),i=s[0],u=s[1],o=Object(n.useState)(null),m=Object(b.a)(o,2),E=m[0],f=m[1];return l.a.createElement("div",{className:"container-root"},l.a.createElement("div",{className:"jumbotron text-center"},l.a.createElement("h1",{className:"display-4"},"R\xf6str\xe4knare "),l.a.createElement("p",{className:"lead"},"V\xe4stg\xf6ta Nation")),a?l.a.createElement(p,{setSubmitted:r,voteCodeFile:i,voteFile:E}):l.a.createElement(d,{setSubmitted:r,setVoteCodeFile:u,setVoteFile:f}))}a(35);function j(){return l.a.createElement("div",{className:"footer"},l.a.createElement("span",{className:"support-text"},"Fr\xe5gor: david.jungermann@gmail.com"))}a(36);var N=function(e){Object(u.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m.a,{basename:"/voting-vg"},l.a.createElement(v,null),l.a.createElement(j,null))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.609c44af.chunk.js.map